<div class="patient-page">
  <div class="patient-container">
    <div class="section-header">
      <div>
        <p class="eyebrow">Tu historial</p>
        <h1>Historial médico</h1>
        <p class="muted">Consulta diagnósticos, tratamientos y prescripciones previas.</p>
      </div>
      <%= link_to "Dashboard", patients_dashboard_path, class: "btn-ghost-sm" %>
    </div>

    <% if @medical_histories.any? %>
      <div class="card-list">
        <% @medical_histories.each do |history| %>
          <div class="item-card">
            <div class="item-avatar">
              <i class="fa fa-file-medical-alt"></i>
            </div>
            <div class="item-body">
              <p class="item-title"><%= history.diagnosis.truncate(60) %></p>
              <p class="muted">
                <%= history.registration_date&.strftime('%d %b %Y') %> ·
                <%= history.doctor.user.name %> <%= history.doctor.user.last_name %> ·
                <%= history.doctor.speciality.humanize %>
              </p>
            </div>
            <div class="item-actions">
              <%= link_to "Ver detalle", patients_medical_history_path(history), class: "btn-ghost-sm" %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="muted">Aún no hay registros médicos.</p>
    <% end %>
  </div>
</div>
